name: ğŸŒ Frontend ESLint Analysis

# ğŸ” This workflow runs ESLint static analysis on Vue.js and TypeScript files
# to ensure code quality, consistency, and catch potential issues early.
# Integrates with GitHub Security for centralized reporting.
on:
  push:
    branches: ["main"]
    paths:
      - "**/*.vue" # ğŸ¨ Vue.js components
      - "**/*.ts" # ğŸ“˜ TypeScript files
  pull_request:
    branches: ["main"]
    paths:
      - "**/*.vue" # ğŸ¨ Vue.js components
      - "**/*.ts" # ğŸ“˜ TypeScript files
  schedule:
    - cron: "50 23 * * *" # ğŸ•š Daily at 23:50 UTC for security scanning
  workflow_dispatch: # ğŸš€ Allow manual triggering

permissions:
  contents: read

jobs:
  eslint:
    name: ğŸ” Run ESLint Scanning
    runs-on: ubuntu-latest
    permissions:
      contents: read # ğŸ“– Read repository contents
      security-events: write # ğŸ”’ Write security analysis results
      actions: read # âš¡ Read action status (required for private repos)
    steps:
      - name: ğŸ“¥ Checkout Repository
        uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6.0.1

      - name: ğŸ“¦ Setup Node.js 22
        uses: actions/setup-node@395ad3262231945c25e8478fd5baf05154b1d79f # v6.1.0
        with:
          node-version: 22.x
          cache: "yarn" # ğŸš€ Speed up builds with yarn cache

      - name: ğŸ› ï¸ Install ESLint SARIF Formatter
        run: |
          yarn add @microsoft/eslint-formatter-sarif -D
        # ğŸ“‹ Add SARIF formatter for GitHub Security integration

      - name: ğŸ” Run ESLint Analysis
        run: npx nx run front:lint --
          --format @microsoft/eslint-formatter-sarif
          --output-file eslint-results.sarif
        continue-on-error: true
        # ğŸ¯ Lint frontend code using NX, output in SARIF format for GitHub

      - name: ğŸ“¤ Upload Results to GitHub Security
        uses: github/codeql-action/upload-sarif@cdefb33c0f6224e58673d9004f47f7cb3e328b89 # v4.31.10
        with:
          sarif_file: apps/front/eslint-results.sarif
          wait-for-processing: true
        # ğŸ”’ Upload linting results to GitHub Security tab for visibility
